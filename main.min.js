(()=>{var toggleSwitch=document.querySelector('.theme-switch input[type="checkbox"]');var currentTheme=localStorage.getItem("theme");if(currentTheme){document.documentElement.setAttribute("data-theme",currentTheme);if(currentTheme==="dark"){toggleSwitch.checked=true;document.querySelector(".theme-switch i").classList.remove("gg-moon");document.querySelector(".theme-switch i").classList.add("gg-sun");}else{toggleSwitch.checked=false;document.querySelector(".theme-switch i").classList.remove("gg-sun");document.querySelector(".theme-switch i").classList.add("gg-moon");}}
function switchTheme(e){if(e.target.checked){document.documentElement.setAttribute("data-theme","dark");localStorage.setItem("theme","dark");document.querySelector(".theme-switch i").classList.remove("gg-moon");document.querySelector(".theme-switch i").classList.add("gg-sun");}else{document.documentElement.setAttribute("data-theme","light");localStorage.setItem("theme","light");document.querySelector(".theme-switch i").classList.remove("gg-sun");document.querySelector(".theme-switch i").classList.add("gg-moon");}}
toggleSwitch.addEventListener("change",switchTheme,false);function getElements(){return{layout:document.getElementById("layout"),menu:document.getElementById("menu"),menuLink:document.getElementById("menuLink")};}
function toggleClass(element,className){var classes=element.className.split(/\s+/);var length=classes.length;var i=0;for(;i<length;i++){if(classes[i]===className){classes.splice(i,1);break;}}
if(length===classes.length){classes.push(className);}
element.className=classes.join(" ");}
function toggleAll(){var active="active";var elements=getElements();toggleClass(elements.layout,active);toggleClass(elements.menu,active);toggleClass(elements.menuLink,active);}
function handleEvent(e){var elements=getElements();if(e.target.id===elements.menuLink.id){toggleAll();e.preventDefault();}else if(elements.menu.className.indexOf("active")!==-1){toggleAll();}}
document.addEventListener("click",handleEvent);window.onload=function(){var toc=document.querySelector(".toc");var tocPath=document.querySelector(".toc-marker path");var tocItems;var TOP_MARGIN=0.05,BOTTOM_MARGIN=0.05;var pathLength;var lastPathStart,lastPathEnd;window.addEventListener("resize",drawPath,false);window.addEventListener("scroll",sync,false);drawPath();function drawPath(){tocItems=[].slice.call(toc.querySelectorAll("li"));tocItems=tocItems.map(function(item){var anchor=item.querySelector("a");var target=document.getElementById(anchor.getAttribute("href").slice(1));return{listItem:item,anchor,target};});tocItems=tocItems.filter(function(item){return!!item.target;});var path=[];var pathIndent;tocItems.forEach(function(item,i){var x=item.anchor.offsetLeft-5,y=item.anchor.offsetTop,height=item.anchor.offsetHeight;if(i===0){path.push("M",x,y,"L",x,y+height);item.pathStart=0;}else{if(pathIndent!==x)
path.push("L",pathIndent,y);path.push("L",x,y);tocPath.setAttribute("d",path.join(" "));item.pathStart=tocPath.getTotalLength()||0;path.push("L",x,y+height);}
pathIndent=x;tocPath.setAttribute("d",path.join(" "));item.pathEnd=tocPath.getTotalLength();});pathLength=tocPath.getTotalLength();sync();}
function sync(){var windowHeight=window.innerHeight;var pathStart=pathLength,pathEnd=0;var visibleItems=0;tocItems.forEach(function(item){var targetBounds=item.target.getBoundingClientRect();if(targetBounds.bottom>windowHeight*TOP_MARGIN&&targetBounds.top<windowHeight*(1-BOTTOM_MARGIN)){pathStart=Math.min(item.pathStart,pathStart);pathEnd=Math.max(item.pathEnd,pathEnd);visibleItems+=1;item.listItem.classList.add("active");}else{item.listItem.classList.remove("active");}});if(visibleItems>0&&pathStart<pathEnd){if(pathStart!==lastPathStart||pathEnd!==lastPathEnd){tocPath.setAttribute("stroke-dashoffset","1");tocPath.setAttribute("stroke-dasharray","1, "+pathStart+", "+(pathEnd-pathStart)+", "+pathLength);tocPath.setAttribute("opacity",1);}}else{tocPath.setAttribute("opacity",0);}
lastPathStart=pathStart;lastPathEnd=pathEnd;}};})();